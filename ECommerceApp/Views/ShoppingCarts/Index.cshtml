@model IEnumerable<ECommerceApp.Models.ShoppingCart>

@{
    ViewBag.Title = "Index";
}

<h2>Shopping Cart</h2>

<table class="table table-striped">
    <tr>
        <th>
            @Html.DisplayNameFor(model=>model.Book.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Quantity)
        </th>
        <th>
            @Html.DisplayNameFor(model=>model.Book.Price)
        </th>
        <th>
            Subtotal
        </th>
        <th></th>
    </tr>

    @{ decimal grandtotal = 0;}

@foreach (var item in Model) {
    var price = string.Format("{0:N0}", item.Book.Price);
    var subtotal = item.Quantity * item.Book.Price;
    grandtotal += subtotal;
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Book.Title)
        </td>
        <td class="text-right">
            @Html.DisplayFor(modelItem => item.Quantity)
        </td>
        <td class="text-right">
            @price
        </td>
        <td class="text-right">
            @string.Format("{0:N0}",subtotal)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.RecordID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.RecordID })
        </td>
    </tr>
}
    

</table>

<h4 class="text-right">
    Grand Total : @string.Format("{0:N0}", grandtotal)
</h4>

<a href="" class="btn btn-success btn-xs">Final Checkout</a>


